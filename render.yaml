services:
  # FRONTEND (Static Deploy but using web_service)
  - type: web_service
    name: customer-support-frontend
    repo: https://github.com/Ravi-Katiyar04/customer_support_agent
    branch: main
    buildCommand: cd frontend && npm install && npm run build
    publishPath: frontend/dist
    envVars:
      - key: VITE_API_URL
        sync: false   # You will set backend URL after backend deploy

  # BACKEND (ADK Agent Runtime)
  - type: web_service
    name: customer-support-backend
    repo: https://github.com/Ravi-Katiyar04/customer_support_agent
    branch: main
    docker:
      dockerfilePath: backend/Dockerfile
    envVars:
      - key: DB_URL
        value: sqlite+aiosqlite:///tmp/database.db
      - key: OPENAI_API_KEY
        sync: false   # Add your OpenAI API key in Render dashboard
