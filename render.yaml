version: "1"

instances:
  # FRONTEND (Static Vite React)
  - name: customer-support-frontend
    repo: https://github.com/Ravi-Katiyar04/customer_support_agent
    branch: main
    plan: free
    runtime: node
    build:
      command: cd frontend && npm install && npm run build
    start:
      command: npx serve -s frontend/dist -l 3000
    envVars:
      - key: VITE_API_URL
        sync: false

  # BACKEND (FastAPI + ADK via Docker)
  - name: customer-support-backend
    repo: https://github.com/Ravi-Katiyar04/customer_support_agent
    branch: main
    plan: free
    runtime: docker
    dockerfilePath: backend/Dockerfile
    envVars:
      - key: DB_URL
        value: sqlite+aiosqlite:///tmp/database.db
      - key: OPENAI_API_KEY
        sync: false
